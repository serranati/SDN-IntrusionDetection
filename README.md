# SDN-IntrusionDetection
This project implements a simple Machine Learning‚Äìbased Intrusion Detection System (IDS) for Software-Defined Networking (SDN).  
The goal is to let an **ONOS controller** extract flow information from the network, send it to an external **REST API**, and receive a classification such as *benign* or *malicious*.  
The REST API will integrate a trained ML model for detecting attacks such as DDoS.

---

## üìÅ Repository Structure

```

.
‚îú‚îÄ‚îÄ ML-training.ipynb       # Jupyter notebook used to train the ML model
‚îÇ
‚îú‚îÄ‚îÄ rest_api/
‚îÇ   ‚îî‚îÄ‚îÄ server.py           # FastAPI REST server receiving flow data from ONOS
‚îÇ
‚îî‚îÄ‚îÄ onos/                   # ONOS application source code
‚îú‚îÄ‚îÄ app/                # Java ONOS app logic
‚îî‚îÄ‚îÄ ...                 # Other ONOS project files

```

---

## Running the REST API Server

The IDS REST API is implemented using **FastAPI**.

1. Install dependencies:
   ```bash
   pip install fastapi uvicorn
    ```

2. Start the server:

   ```bash
   uvicorn rest_api.server:app --host 0.0.0.0 --port 5000
   ```

3. The API will be available at:

   ```
   POST http://localhost:5000/predict
   ```

4. Interactive API documentation (auto-generated by FastAPI) is available at:

   ```
   http://localhost:5000/docs
   ```

ONOS will send flow statistics to this endpoint for classification.

---

Here is a clean, concise section you can paste directly into your README.

---

## ONOS IDS Application

This project includes a custom **ONOS application** that periodically collects flow statistics from all switches in the SDN network and forwards these flow features to the external REST API for classification.

### How It Works

* The app is implemented in Java and packaged as an OAR bundle.
* Every *N* seconds, it:

  1. Retrieves all **FlowEntry** objects from the ONOS `FlowRuleService`.
  2. Extracts relevant flow statistics:

     * Packet count
     * Byte count
     * Duration
     * Match criteria (IP addresses, ports, protocol, etc.)
  3. Converts each flow entry into JSON.
  4. Sends this JSON via HTTP POST to the REST API endpoint:

     ```
     http://localhost:5000/predict
     ```
  5. Receives a classification label (e.g., `"benign"` or `"malicious"`).
  6. Logs the result and makes it available through an ONOS CLI command:

     ```
     ids-stats
     ```

This keeps the ONOS controller lightweight: all ML processing is done externally, and ONOS only performs data extraction and response handling.

---

### Installing the App into ONOS

Build the application as an OAR file and install it into your ONOS Docker container as follows:

1. **Build the application with Bazel:**

   ```bash
   cd onos/
   bazel build //apps/ids:onos-apps-ids-oar --extra_toolchains=@rules_python//python:autodetecting_toolchain_nonstrict
   ```

2. **Copy the OAR file into the ONOS container:**

   ```bash
   docker cp onos/bazel-bin/apps/ids/onos-apps-ids-oar.oar onos:/root/onos/apps
   ```

3. **Enter the container:**

   ```bash
   docker exec -it onos /bin/bash
   ```

4. **Install the application:**

   ```bash
   bin/onos-app localhost install apps/onos-apps-ids-oar.oar
   ```

5. **Open the ONOS CLI:**

   ```bash
   bin/onos -l onos
   ```

6. **Activate the IDS application:**

   ```bash
   app activate ids
   ```

7. (Optional) **View last predictions** using the custom CLI command:

   ```bash
   ids-stats
   ```

Once activated, the ONOS controller will automatically begin sending flow statistics to the REST API for real-time intrusion detection.


